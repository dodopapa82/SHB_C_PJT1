<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API ì—°ê²° í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-item {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #0047FF;
            color: white;
            font-size: 14px;
        }
        button:hover { background-color: #0036CC; }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            max-height: 300px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ DART API ì—°ê²° í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-item">
        <h3>1. ë°±ì—”ë“œ ì„œë²„ ìƒíƒœ</h3>
        <button onclick="testBackendStatus()">ì„œë²„ ìƒíƒœ í™•ì¸</button>
        <div id="result-status"></div>
    </div>
    
    <div class="test-item">
        <h3>2. ê¸°ì—… ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testSearch('ì‚¼ì„±ì „ì')">ì‚¼ì„±ì „ì ê²€ìƒ‰</button>
        <button onclick="testSearch('ì‹ í•œì€í–‰')">ì‹ í•œì€í–‰ ê²€ìƒ‰</button>
        <div id="result-search"></div>
    </div>
    
    <div class="test-item">
        <h3>3. ê¸°ì—… ì •ë³´ ì¡°íšŒ í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testCompanyInfo('00126380')">ì‚¼ì„±ì „ì ì •ë³´</button>
        <button onclick="testCompanyInfo('00149293')">ì‹ í•œì€í–‰ ì •ë³´</button>
        <div id="result-company"></div>
    </div>
    
    <div class="test-item">
        <h3>4. KPI ë¶„ì„ í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testKPI('00126380')">ì‚¼ì„±ì „ì KPI</button>
        <button onclick="testKPI('00149293')">ì‹ í•œì€í–‰ KPI</button>
        <div id="result-kpi"></div>
    </div>
    
    <div class="test-item">
        <h3>5. ì·¨ì•½ì  ë¶„ì„ í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testWeakness('00126380')">ì‚¼ì„±ì „ì ì·¨ì•½ì </button>
        <button onclick="testWeakness('00149293')">ì‹ í•œì€í–‰ ì·¨ì•½ì </button>
        <div id="result-weakness"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:5001/api';

        async function testAPI(url, resultId) {
            const resultDiv = document.getElementById(resultId);
            resultDiv.innerHTML = '<p>â³ ë¡œë”© ì¤‘...</p>';
            
            try {
                console.log('ğŸ”„ API í˜¸ì¶œ:', url);
                const response = await fetch(url);
                console.log('ğŸ“¡ ì‘ë‹µ ìƒíƒœ:', response.status);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                console.log('âœ… ì‘ë‹µ ë°ì´í„°:', data);
                
                resultDiv.className = 'test-item success';
                resultDiv.innerHTML = `
                    <p>âœ… <strong>ì„±ê³µ</strong></p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                console.error('âŒ ì—ëŸ¬:', error);
                resultDiv.className = 'test-item error';
                resultDiv.innerHTML = `
                    <p>âŒ <strong>ì‹¤íŒ¨</strong></p>
                    <p>ì—ëŸ¬: ${error.message}</p>
                `;
            }
        }

        function testBackendStatus() {
            testAPI('http://localhost:5001/', 'result-status');
        }

        function testSearch(query) {
            testAPI(`${API_BASE}/search?q=${encodeURIComponent(query)}`, 'result-search');
        }

        function testCompanyInfo(corpCode) {
            testAPI(`${API_BASE}/company/${corpCode}`, 'result-company');
        }

        function testKPI(corpCode) {
            testAPI(`${API_BASE}/kpi/${corpCode}`, 'result-kpi');
        }

        function testWeakness(corpCode) {
            testAPI(`${API_BASE}/weakness/${corpCode}`, 'result-weakness');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.onload = function() {
            console.log('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            console.log('ğŸ“¡ API Base URL:', API_BASE);
        };
    </script>
</body>
</html>

